{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <title>Permission Denied</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="icon" type="image/png" href="{% static 'plant_tracker/favicon-96x96.png' %}" sizes="96x96" />
    <link rel="icon" type="image/svg+xml" href="{% static 'plant_tracker/favicon.svg' %}" />
    <link rel="shortcut icon" href="{% static 'plant_tracker/favicon.ico' %}" />
    <link rel="apple-touch-icon" sizes="180x180" href="{% static 'plant_tracker/apple-touch-icon.png' %}" />
    <link rel="stylesheet" type="text/css" href="{% static 'plant_tracker/spa.css' %}">
    {# Prevent visual flash on page load in dark mode #}
    <style>
        html[data-theme="dark"] body {
            background: #1D232A;
        }
    </style>
    <script>
        // Set theme dataset attribute from localStorage (or default to dark)
        const initialTheme = localStorage.getItem('theme') || 'dark';
        document.documentElement.setAttribute('data-theme', initialTheme);

        // Toggles theme in data attribute and localStorage, sets button text
        const toggleTheme = () => {
            const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'light' : 'dark';
            document.documentElement.setAttribute('data-theme', theme);
            localStorage.setItem('theme', theme);
            const button = document.getElementById('theme-toggle')
            button.textContent = theme === 'dark' ? 'Light mode' : 'Dark mode';
        };
    </script>
</head>

<body>
    <div class="container flex flex-col full-screen mx-auto items-center gap-16">
        <div class="navbar bg-base-100 fixed top-0 z-99">
            <div class="dropdown justify-start min-w-12">
                <div tabindex="0" role="button" class="btn btn-ghost btn-circle size-12" aria-label="Navigation menu">
                    <svg xmlns="http://www.w3.org/2000/svg" class="size-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h7"></path>
                    </svg>
                </div>
                <ul tabindex="0" class="dropdown-content menu z-90 shadow-sm bg-base-300 rounded-box mt-3">
                    <li><a href="/">Overview</a></li>
                    <li><button id="theme-toggle" onclick="toggleTheme()">Light mode</button></li>
                </ul>
            </div>
            <div class="mx-auto shrink min-w-0" title="Scroll to top">
                <div class="dropdown dropdown-center w-full">
                    <a tabindex="-1" role="heading" class="w-full px-0 text-nowrap font-semibold">
                        <span class="px-4 leading-[2.75rem] truncate" style="font-size: 32px;">
                            Permission Denied
                        </span>
                    </a>
                </div>
            </div>
            <div class="justify-end min-w-12"></div>
        </div>
        {# Display error from context #}
        <div class="flex flex-col text-center text-lg mt-[15vh]">
            {{ error }}
        </div>
        <a href="/" class="btn btn-accent">
            Go to Overview
        </a>
    </div>
    <script>
        // Set initial toggle theme button text
        document.addEventListener('DOMContentLoaded', () => {
            const button = document.getElementById('theme-toggle');
            if (!button) return;
            const currentTheme = document.documentElement.getAttribute('data-theme') || 'dark';
            button.textContent = currentTheme === 'dark' ? 'Light mode' : 'Dark mode';
        });
    </script>
</body>
</html>
